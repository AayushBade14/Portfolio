<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aayush Bade's Portfolio Website">

    <title>Aayush Bade</title>
    
    <link href="../../../assets/icons/icon.png" rel="icon" type="image/png">
    <link href="part3.css" rel="stylesheet">
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
      onload="renderMathInElement(document.body, {
          delimiters: [
            { left: '$$', right: '$$', display: true },
            { left: '\\(', right: '\\)', display: false }
          ]
      });">
    </script>
  </head>
  <body>
    <main>
      <nav>
        <div class="logo"><a href="../../../index.html">Aayush Bade</a></div>
        <div class="socials">
          <a href="https://github.com/AayushBade14" target="_blank"><img src="../../../assets/socials/github.png" alt="github-logo" loading="lazy" draggable="false"/></a>
          <a href="https://www.linkedin.com/in/aayush-raju-bade-b268b2280/" target="_blank"><img src="../../../assets/socials/linkedin.png" alt="linkedin-logo" loading="lazy" draggable="false"/></a>
          <a href="https://x.com/AayushBade14" target="_blank"><img src="../../../assets/socials/twitter.png" alt="twitter-logo" loading="lazy" draggable="false"/></a>
          <a href="https://youtube.com/@aayushrajubade" target="_blank"><img src="../../../assets/socials/youtube.png" alt="youtube-logo" loading="lazy" draggable="false"/></a>
          <a href="https://medium.com/@aayushrajubade" target="_blank"><img src="../../../assets/socials/medium.png" alt="medium-logo" loading="lazy" draggable="false"/></a>
          <a href="https://www.artstation.com/aayushbade" target="_blank"><img src="../../../assets/socials/artstation.png" alt="artstation-logo" loading="lazy" draggable="false"/></a>
        </div>
      </nav>
      <div class="intro">
        <div class="navigator">
          <a href="../../../index.html">Home</a> :: <a href="../../../pages/blogs/blogs.html">Blogs</a> :: <a href="../index.html">OpenGL Concepts</a>
        </div>
        <h1>2. Viewing in graphics - <span>The Camera Transformation</span></h1>
        <hr noshade>
        <br>
        <br>
        <p>"Well, well... Look, who do we have here?" Aren't you tired already from the last blog? I mean it was kind of a math monster, won't you agree? Compared to the <a href="../part2/part2.html">last-blog</a> this is going to be a cake walk. Yeah, trust me... See it for yourself. But yeah this topic is quite important, The camera transformation allows to see the world through the lens of a sweet-little virtual-camera. This will give you the ability to attach this camera to your game-character and follow it and do a lot's of cool stuff. Like you can attach this camera to a FPS-hands model and baammmm! you've made yourself a simple fps setup, and now you can make the camera move based on inputs from keyboard for walking and looking around with mouse movements. I hope this hypes you up for what comes next.... Tons of Math! Lol..</p>
        <br>
        <br>
        <div class="figure" id="fig-3.1">
          <img src="https://i.redd.it/lvqku2h0m01c1.gif"/>
          <img src="https://i.makeagif.com/media/9-27-2019/UFXCzS.gif"/>
          <h5>Fig-3.1: Yeah! you can create such fps/tps-setup after learning this, you'll surely be able to build a character controller.</h5>
        </div>
        <br>
        <br>
        <p>Now, let's start by understanding what a virtual-camera is in the first place. It is as its name suggests, a camera that we define in code (simply mathematical-transformations) and do not mistake it by any floating object in our game world... NO! (большое нет), we apply this so-called virtual-camera transform to each and everything we render in our virtual-world and this transforms or changes objects positions as seen throught the lens of our virtual-camera. Before we define our virtual-camera using the mathematical-construct, let's undestand how basis-transformation works and what is it exactly, as this is the meat of our camera-transformation.</p>
        <br>
        <br>
        <p>Basis vectors are orthonormal vectors, meaning that they are normalized(having magnitude = 1) and are mutually-perpendicular to each-other. Just like the <b>Canonical Basis</b>, - \(\{x,y,z\}\) which are mutually-perpendicular to each other and all have a unit magnitude. These basis are represented as vectors as follows:</p>
        <br>
        <br>
        $$
        x = 
        \begin{pmatrix}
        1 \\
        0 \\
        0 
        \end{pmatrix}
        \; y = 
        \begin{pmatrix}
        0 \\
        1 \\
        0 
        \end{pmatrix}
        \; z = 
        \begin{pmatrix}
        0 \\
        0 \\
        1 
        \end{pmatrix}
        $$
        <br>
        <br>
        <p>Any coordinate-system/frame is defined by a point \(P\)(origin) and \(\{u,v,w\}\) its basis vectors. Our <b>Canonical Frame</b> is defined by the origin \(O=(0,0,0)\) and the basis vectors \(\{x,y,z\}\). Now that we understand what a coordinate-system/frame is, we can move forward and understand the change of basis through an example. <br><br><b>Case1:</b> Say we have a car-racing game and the player sees the world in a first-person view, that is they see the world through the windshield of the car. Now we do a trick when the car moves, we keep the car's dashboard and everything as a static overlay, drawn on top of the world which just moves in the opposite direction. Here, we can safely say that the coordinate-system/frame or our frame-of-reference is the car and the world moves with-respect-to this car/frame-of-reference.<br><br><b>Case2:</b> Another way to see this is, say our racing game is now in third-person view and we see the car from a camera floating above it. Now it makes sense to keep the world static and move the car around with-respect-to the frame-of-reference, which is the world-origin. Take a look at <a href="#fig-3.2">Fig-3.2</a> for a better understanding.</p>
        <br>
        <br>
        <div class="figure" id="fig-3.2">
          <img src="https://global.discourse-cdn.com/forza/original/4X/c/c/5/cc5df8257d5143138e177cc5c19a0c94103b4caa.gif"/>
          <h5><b>Case1</b></h5>
          <img src="https://global.discourse-cdn.com/forza/original/3X/9/f/9f8067e288e8a2f1e2d9199a2903c10bd5a47412.gif"/>
          <h5><b>Case2</b></h5>
          <h5>Fig-3.2</h5>
        </div>
        <br>
        <br>
        <p>The point of this analogy was to explain the fact that any point in the world can be defined with-respect-to different frame-of-references. For example, your favourite pizza place might be 200m away from your place, but might be miles away from mine. See, all depends on the frame-of-reference, who's the observer, the observer decides it all. Take a look at <a href="#fig-3.3">Fig-3.3</a> for a better understanding.</p>
        <br>
        <br>
        <div class="figure" id="fig-3.3">
          <img src="../assets/frame_of_ref.jpg"/>
          <h5>Fig-3.3: Frame of reference</h5>
        </div>
        <br>
        <br>
        <p>But, say that you wanna invite your girlfriend to the same pizza place for a date. Now you've to communicate the location of this pizza place to her using a frame-of-reference that she understands. You can't tell her that this place is \(0.5 \cdot x + 0.3 \cdot y\) from my place, you need to tell her the location from her home's frame-of-reference so that she can make it to the date. Telling her the location from her frame-of-reference is what we call as <b>Basis Transformation</b>.</p>
        <br>
        <br>
        <p>This basis-transformation is nothing but expressing one set of basis vectors in terms of other. That's it, its that simple. Let's understand the math behind this from <a href="#fig-3.3">Fig-3.3</a>, it can be done in two easy steps as follows:</p>
        <br>
        <br>
        <h3><b>Step1:</b></h3>
        <br>
        <p>We first translate the origin of your frame-of-reference to the origin of her frame-of-reference (the Canonical frame-of-reference). We can achieve this by creating a translation matrix as follows: </p>
        <br>
        <br>
        <div class="figure" id="result-3.1">
          $$
          T_{2d} = 
          \begin{pmatrix}
          1 & 0 & -x_e \\
          0 & 1 & -y_e \\
          0 & 0 & 1
          \end{pmatrix}
          $$
          <h5>Result-3.1: Rotation matrix to rotate your frame-of-reference to hers</h5>
        </div>
        <br>
        <br>
        <p>Take a look at <a href="#fig-3.4">Fig-3.4</a> for a better understanding.</p>
        <br>
        <br>
        <div class="figure" id="#fig-3.4">
          <img src="../assets/basis_translate.jpg" />
          <h5>Fig-3.4: basis-transformation - translation</h5>
        </div>
        <br>
        <br>
        <h3><b>Step2:</b></h3>
        <br>
        <p>We first rotate your frame-of-reference to match the orientation of her frame-of-reference (the Canonical frame-of-reference). We can achieve this by creating a rotation matrix as follows: </p>
        <br>
        <br>
        <div class="figure" id="result-3.2">
          $$
          R_{2d} = 
          \begin{pmatrix}
          x_u & x_v & 0 \\
          y_u & y_v & 0 \\
          0 & 0 & 1
          \end{pmatrix}
          $$
          <h5>Result-3.2: Rotation matrix to rotate your frame-of-reference to hers</h5>
        </div>
        <br>
        <br>
        <p>We're again using the column major format, and the first column corresponds to the basis vector \(u\) and the second corresponds to \(v\), we've just written each in terms of the basis \(\{x,y\}\), this will rotate your frame-of-reference to hers. Take a look at <a href="#fig-3.5">Fig-3.5</a> for a better understanding.</p>
        <br>
        <br>
        <div class="figure" id="#fig-3.5">
          <img src="../assets/basis_rotate.jpg" />
          <h5>Fig-3.5: basis-transformation - rotation</h5>
        </div>
        <br>
        <br>
        <p>Now let's accumulate both of the transforms into a single matrix, note that these are in column-major format, so the transforms are applied from right to left as follows:</p>
        <br>
        <br>
        $$
          M_{basis-change} = R_{2d} \cdot T_{2d}
        $$
        <br>
        <br>
        $$
          M_{basis-change} = \begin{pmatrix}
                            x_u & x_v & 0 \\
                            y_u & y_v & 0 \\
                            0 & 0 & 0
                            \end{pmatrix}
                            \cdot
                            \begin{pmatrix}
                            1 & 0 & -x_e \\
                            0 & 1 & -y_e \\
                            0 & 0 & 1
                            \end{pmatrix}
        $$
        <br>
        <br>
        $$
          M_{basis-change} = \begin{pmatrix}
                              x_v & x_v & -x_e \\
                              y_u & y_v & -y_e \\
                              0 & 0 & 1
                              \end{pmatrix}
        $$
        <br>
        <br>
        $$
          M_{basis-change} = \begin{pmatrix}
                              | & | & | \\
                              u & v & e \\
                              | & | & | \\
                              0 & 0 & 1
                              \end{pmatrix} ^{-1}
        $$
        <br>
        <br>
        <p>This can be extended to 3-dimensions as follows: </p>
        <br>
        <br>
        <div class="figure" id="result-3.3">
          <b>
            $$
              M_{basis-change} = \begin{pmatrix}
                                  | & | & | & | \\
                                  u & v & w & e \\
                                  | & | & | & | \\
                                  0 & 0 & 0 & 1
                                  \end{pmatrix} ^{-1}
            $$
          </b>
          <h5>Result-3.3: Matrix for basis-change</h5>
        </div>
        <br>
        <br>
        <p>Now, that we've understood the math behind basis-change we can finally understand the camera-transformation. Let's define our virtual-camera first. Let's say that our camera is located at the origin \(e\) and has the basis \(\{u,v,w\}\) and let's say we've additional two vectors. Gaze - where our camera looks \(g\) and top - which points to the top of our view-volume \(t\). Take a look at <a href="#fig-3.6">Fig-3.6</a> for a better understanding.</p>
        <br>
        <br>
        <div class="figure" id="fig-3.6">
          <img src="../assets/virtual-camera.jpg" />
          <h5>Fig-3.6: Virtual camera setting</h5>
        </div>
        <br>
        <br>
        <p>Now, we understand the setting of our virtual-camera and the gaze vector \(g\) and top vector \(t\) is already known in terms of canonical basis and \(e\) is already in canonical basis as it is the camera position that we define in canonical basis. Now the only thing that is left to find the camera-basis \(\{u,v,w\}\) in terms of the gaze vector \(g\) and top vector \(t\) and the camera position \(e\). This can be done as follows: </p>
        <br>
        <br>
        <p>basis vector \(w\) can be written as negative of \(g\) as seen in <a href="#fig-3.6">Fig-3.6</a></p>
        <br>
        <br>
        <div class="figure" id="result-3.4">
        $$
          w = -\frac{g}{||g||}
        $$
        <h5>Result-3.4</h5>
        </div>
        <br>
        <br>
        <p>For the basis we require normalized vectors, and so we divide \(g\) by its norm or magnitude represented by the notation \(||g||\).</p>
        <br>
        <br>
        <p>Now we can get the right-vector \(u\) by taking a cross-product between \(t\) and \(w\) which is quite evident from <a href="#fig-3.6">Fig-3.6</a>.</p>
        <br>
        <br>
        <div class="figure" id="result-3.5">
        $$
          u = \frac{t \times w}{|| t \times w ||}
        $$
        <h5>Result-3.5</h5>
        </div>
        <br>
        <br>
        <p>Now that we've two of the three basis vector the third one \(v\) can be found by taking the cross-product of the two we know.</p>
        <br>
        <br>
        <div class="figure" id="result-3.6">
        $$
          v = w \times u
        $$
        <h5>Result-3.6</h5>
        </div>
        <br>
        <br>
        <p>Now that we've found the basis for camera in terms of our canonical basis. We just plug these into <a href="#result-3.3">Result-3.3</a> and we have our camera transform.</p>
        <br>
        <br>
        $$
              M_{basis-change} = \begin{pmatrix}
                                  | & | & | & | \\
                                  u & v & w & e \\
                                  | & | & | & | \\
                                  0 & 0 & 0 & 1
                                  \end{pmatrix} ^{-1}
        $$
        <br>
        <br>
        <p>let's call this matrix \(M_{cam}\) and using <a href="#result-3.4">Result-3.4</a>, <a href="#result-3.5">Result-3.5</a>, <a href="#result-3.6">Result-3.6</a>, we get: </p>
        <br>
        <br>
        <div class="figure" id="result-3.7">
          <b>
        $$
          M_{cam} = \begin{pmatrix}
                    x_u & y_u & z_u & -x_e \\
                    x_v & y_v & z_v & -y_e \\
                    x_w & y_w & z_w & -z_e \\
                    0 & 0 & 0 & 1
                    \end{pmatrix}
        $$
          </b>
          <h5>Result-3.7: Camera transformation matrix</h5>
        </div>
        <br>
        <br>
        <p>We have finally derived the camera transformation matrix. Now you just need to update this matrix every frame based on player-position and the look-at vector and you have yourself a character controller setup. And you can use it in the following way, given that you already have the \(M_{ortho}\) ready with you: </p>
        <br>
        <br>
        $$
          \begin{pmatrix}
          x_{pixel} \\
          y_{pixel} \\
          z_{canonical} \\
          1
          \end{pmatrix}

          = ( M_{vp} \cdot M_{ortho} \cdot M_{cam}) \cdot \begin{pmatrix}
                                                          x \\
                                                          y \\
                                                          z \\
                                                          1
                                                          \end{pmatrix}
        $$
        <br>
        <br>
        <p>Wooohoooo! Give yourselves a good pat on your back and treat yourself with a cup of coffee and your favourite snack. We just have one more blog to go, in which we will learn about perspective projection and then we are done with viewing in graphics.</p>
        <br>
        <br>
        <div class="figure" id="fig-3.7">
          <img src="https://i.pinimg.com/originals/4a/61/58/4a6158ad4f30c71f4fecf224cec12eb1.gif" />
        </div>
        <br>
        <br>
        <p>NEXT-BLOG: <a href="#">4. Viewing in graphics - The Perspective Projection</a></p>
        <br>
        <br>
      </div>
      
      <footer>
          <p>&copy; 2025 Aayush Bade. All rights reserved.</p>
      </footer>
      
    </main>
  </body>
</html>





